!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(self.webpackChunkjugendkompass=self.webpackChunkjugendkompass||[]).push([[2233],{92233:function(r,i,o){o.r(i),o.d(i,{AusgabePageModule:function(){return K}});var a,s=o(38583),u=o(90665),c=o(88786),l=o(90928),d=o(64762),f=o(66097),h=o(68384),p=((a=p||(p={})).Documents="DOCUMENTS",a.Data="DATA",a.Cache="CACHE",a.External="EXTERNAL",a.ExternalStorage="EXTERNAL_STORAGE",p),g=p,m=(0,h.fo)("Filesystem",{web:function(){return o.e(5143).then(o.bind(o,85075)).then(function(e){return new e.FilesystemWeb})}}),v=o(16380),b=(0,h.fo)("CapacitorVideoPlayer",{web:function(){return o.e(8536).then(o.bind(o,48536)).then(function(e){return new e.CapacitorVideoPlayerWeb})}}),w=o(91841),x=o(18752),k=(0,h.fo)("BlobWriter");function y(e){for(var t=new Uint8Array(e),n="",r=0;!(r>=t.byteLength);)n+=String.fromCharCode(t[r]),r+=1;return window.btoa(n)}function C(e,t,n){if(0===n.size)return Promise.resolve();var r=393216,i=n.slice(0,r);return new window.Response(i).arrayBuffer().then(function(n){return m.appendFile({directory:e,path:t,data:y(n)})}).then(function(){return C(e,t,n.slice(r))})}function U(e){var t=e.path,n=e.directory,r=e.blob,i=e.recursive;return m.writeFile({directory:n,path:t,recursive:i,data:""}).then(function(e){var i=e.uri;return C(n,t,r).then(function(){return i})})}var A=Object.freeze(function(e){var t=e.path,r=e.directory,i=e.blob,o=e.recursive,a=e.on_fallback;return"ios"!==h.dV.platform&&"android"!==h.dV.platform?U(e):Promise.all([k.get_config(),m.getUri({path:t,directory:r})]).then(function(e){var t=n(e,2),r=t[0],a=t[1],s=r.base_url,u=r.auth_token,c=a.uri.replace("file://","");return Promise.all([fetch(s+c+(o?"?recursive=true":""),{headers:{authorization:u},method:"put",body:i}),Promise.resolve(a)])}).then(function(e){var t=n(e,2),r=t[0],i=t[1];if(204!==r.status)throw new Error("Bad HTTP status: "+r.status);return i.uri}).catch(function(t){return void 0!==a&&a(t),U(e)})}),Z=o(69526),M=o(76321),q=o(96698),R=o(15257),T=o(10639),P=o(38605),S=o(49860);function J(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"ion-button",21),T.NdJ("click",function(){T.CHM(n),T.oxw();var e=T.MAs(2);return T.oxw().onUploadBtnClick(e)}),T._UZ(1,"ion-icon",22),T.qZA()}}function _(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"ion-button",21),T.NdJ("click",function(){return T.CHM(n),T.oxw(2).downloadPdf()}),T._UZ(1,"ion-icon",23),T.qZA()}}function I(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"ion-button",21),T.NdJ("click",function(){return T.CHM(n),T.oxw(2).share()}),T._UZ(1,"ion-icon",24),T.qZA()}}function F(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"ion-buttons",17),T.TgZ(1,"input",18,19),T.NdJ("change",function(){return T.CHM(n),T.oxw().onFileSelected()}),T.qZA(),T.YNc(3,J,2,0,"ion-button",20),T.YNc(4,_,2,0,"ion-button",20),T.YNc(5,I,2,0,"ion-button",20),T.qZA()}if(2&e){var r=T.oxw();T.xp6(1),T.Q6J("uploader",r.fileUploader),T.xp6(2),T.Q6J("ngIf",r.isAdmin),T.xp6(1),T.Q6J("ngIf",null==r.ausgabe?null:r.ausgabe.pdfUrl),T.xp6(1),T.Q6J("ngIf",r.isApp)}}function V(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"ion-buttons",17),T.TgZ(1,"ion-button",21),T.NdJ("click",function(){return T.CHM(n),T.oxw().saveVorwort()}),T._UZ(2,"ion-icon",25),T.qZA(),T.qZA()}}function D(e,t){if(1&e&&(T.TgZ(0,"h2",13),T._uU(1),T.qZA()),2&e){var n=T.oxw();T.xp6(1),T.Oqu(null==n.ausgabe?null:n.ausgabe.title)}}function N(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"ion-item",26),T.TgZ(1,"ion-label",27),T._uU(2,"Titel"),T.qZA(),T.TgZ(3,"ion-input",28),T.NdJ("ngModelChange",function(e){return T.CHM(n),T.oxw().ausgabe.title=e}),T.qZA(),T.qZA()}if(2&e){var r=T.oxw();T.xp6(3),T.Q6J("ngModel",r.ausgabe.title)}}function O(e,t){if(1&e&&T._UZ(0,"div",29),2&e){var n=T.oxw();T.Udp("font-size",n.textSize,"px"),T.Q6J("innerHTML",null==n.ausgabe?null:n.ausgabe.content,T.oJD)}}function E(e,t){if(1&e&&T._UZ(0,"div",30),2&e){var n=T.oxw();T.Udp("font-size",n.textSize,"px"),T.Q6J("innerHTML",null==n.ausgabe?null:n.ausgabe.content,T.oJD)}}function G(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"ion-button",31),T.NdJ("click",function(){return T.CHM(n),T.oxw().toggleShowMore()}),T._uU(1," Weiterlesen "),T.qZA()}}function Y(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"ion-button",32),T.NdJ("click",function(){return T.CHM(n),T.oxw().toggleShowMore()}),T._uU(1," Weniger anzeigen "),T.qZA()}}function Q(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"ion-textarea",34),T.NdJ("ngModelChange",function(e){return T.CHM(n),T.oxw(2).ausgabe.content=e}),T.qZA()}if(2&e){var r=T.oxw(2);T.Q6J("ngModel",r.ausgabe.content)}}function H(e,t){if(1&e&&(T.TgZ(0,"ion-item",26),T.TgZ(1,"ion-label",27),T._uU(2,"Vowort"),T.qZA(),T.YNc(3,Q,1,1,"ion-textarea",33),T.qZA()),2&e){var n=T.oxw();T.xp6(3),T.Q6J("ngIf",n.editMode)}}function z(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"ion-slide",21),T.NdJ("click",function(){var e=T.CHM(n).$implicit;return T.oxw().openPost(e)}),T.TgZ(1,"ion-card"),T._UZ(2,"img",5),T.TgZ(3,"div"),T._uU(4),T.qZA(),T.qZA(),T.qZA()}if(2&e){var r=t.$implicit;T.xp6(2),T.Q6J("src",r.postImg.source_url,T.LSH),T.xp6(2),T.Oqu(r.title)}}function L(e,t){1&e&&(T.TgZ(0,"h2",13),T._uU(1,"Videos"),T.qZA())}function B(e,t){if(1&e){var n=T.EpF();T.TgZ(0,"ion-slide",21),T.NdJ("click",function(){var e=T.CHM(n).$implicit;return T.oxw(2).playVideo(e)}),T.TgZ(1,"ion-card"),T._UZ(2,"img",5),T._UZ(3,"div",35),T.TgZ(4,"ion-fab-button",36),T._UZ(5,"ion-icon",37),T.qZA(),T.qZA(),T.qZA()}if(2&e){var r=t.$implicit;T.xp6(2),T.Q6J("src",r.image,T.LSH)}}function j(e,t){if(1&e&&(T.TgZ(0,"ion-slides"),T.YNc(1,B,6,1,"ion-slide",15),T.qZA()),2&e){var n=T.oxw();T.xp6(1),T.Q6J("ngForOf",n.ausgabe.videos)}}var W=[{path:"",component:function(){var n=function(){function n(t,r,i,o,a,s,u,c,l,d,f,h){e(this,n),this.platform=t,this.storage=r,this.activatedRoute=i,this.firebaseService=o,this.fileOpener=a,this.loadingController=s,this.actionSheetController=u,this.alertController=c,this.toastController=l,this.audioService=d,this.utils=f,this.router=h,this.textSize=15,this.isAdmin=!1,this.isApp=!0,this.fileUploader=new M.bA({}),this.editMode=!1,this.showMore=!1,this.slideOpts={slidesPerView:1.5,spaceBetween:10,freeMode:!0,breakpoints:{320:{slidesPerView:1.5,spaceBetween:10},480:{slidesPerView:3.2,spaceBetween:10},640:{slidesPerView:4.4,spaceBetween:30},1080:{slidesPerView:5.4,spaceBetween:40}}}}var r,i,o;return r=n,(i=[{key:"ngOnInit",value:function(){var e=this;this.isApp=this.utils.isApp(),this.loadData(),this.firebaseService.subscribeToAdmin().subscribe(function(t){e.isAdmin=t})}},{key:"ngAfterViewInit",value:function(){this.videoPlayer=(this.platform.is("capacitor"),b)}},{key:"playVideo",value:function(e){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.audioService.pause(),n={mode:"fullscreen",url:e.url,subtitle:null,playerId:"fullscreen",componentTag:"app-ausgabe"},t.next=4,this.videoPlayer.initPlayer(n);case 4:this.firebaseService.incrementAnalyticsField(Z.fg.VIDEO_PLAYED,{ausgabe:this.ausgabe.id,ausgabenName:this.ausgabe.name,video:e.name});case 5:case"end":return t.stop()}},t,this)}))}},{key:"ionViewWillEnter",value:function(){var e=this;this.storage.get("text-size").then(function(t){e.textSize=t})}},{key:"ionViewWillLeave",value:function(){this.editMode=!1}},{key:"loadData",value:function(){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.activatedRoute.snapshot.paramMap.get("id"),e.next=3,this.firebaseService.loadCategories();case 3:return this.ausgabe=this.firebaseService.getAusgabe(t),e.next=6,this.firebaseService.getPosts().pipe((0,R.q)(1)).toPromise();case 6:this.posts=e.sent.filter(function(e){var n;return String(null===(n=e.ausgabe)||void 0===n?void 0:n.id)===String(t)});case 7:case"end":return e.stop()}},e,this)}))}},{key:"downloadPdf",value:function(){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.platform.is("capacitor")){e.next=7;break}return e.next=3,this.loadingController.create();case 3:(t=e.sent).present(),this.firebaseService.downloadFile(this.ausgabe.pdfUrl).subscribe(function(e){return(0,d.mG)(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.type===w.dt.DownloadProgress||e.type!==w.dt.Response){n.next=5;break}return n.next=3,A({path:this.ausgabe.name.replace(".","-")+".pdf",directory:g.Data,blob:e.body,recursive:!0});case 3:r=n.sent,t.dismiss(),this.firebaseService.incrementAnalyticsField(Z.fg.PDF_DOWNLOADED,{ausgabe:this.ausgabe.id,ausgabenName:this.ausgabe.name}),this.fileOpener.open(r,"application/pdf");case 5:case"end":return n.stop()}},n,this)}))}),e.next=8;break;case 7:window.open(this.ausgabe.pdfUrl,"_blank"),this.firebaseService.incrementAnalyticsField(Z.fg.PDF_DOWNLOADED,{ausgabe:this.ausgabe.id,ausgabenName:this.ausgabe.name});case 8:case"end":return e.stop()}},e,this)}))}},{key:"onUploadBtnClick",value:function(e){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.actionSheetController.create({buttons:[{text:"Cover uploaden",handler:function(){n.uploadItem="cover",e.accept="image/png, image/jpeg",e.multiple=!1,e.click()}},{text:"PDF uploaden",handler:function(){n.uploadItem="pdf",e.accept="application/pdf",e.multiple=!1,e.click()}},{text:"Video uploaden",handler:function(){n.uploadItem="video",e.accept="video/mp4, image/png, image/jpeg",e.multiple=!0,e.click()}},{text:"Vorwort anpassen",handler:function(){n.editMode=!0}},{text:"Abbrechen"}]});case 2:return t.next=4,t.sent.present();case 4:case"end":return t.stop()}},t,this)}))}},{key:"onFileSelected",value:function(){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.fileUploader.queue||0===this.fileUploader.queue.length){e.next=14;break}if("video"!==this.uploadItem){e.next=13;break}if(2===this.fileUploader.queue.length){e.next=4;break}return e.abrupt("return",(this.showVideoUploadError(),void(this.fileUploader.queue=[])));case 4:if("video/mp4"!==this.fileUploader.queue[0].file.type||"video/mp4"===this.fileUploader.queue[1].file.type){e.next=8;break}this.file=this.fileUploader.queue[0].file,this.file2=this.fileUploader.queue[1].file,this.openConfirmVideoUploadDialog(),e.next=11;break;case 8:if("video/mp4"===this.fileUploader.queue[1].file.type&&"video/mp4"!==this.fileUploader.queue[0].file.type){e.next=10;break}return e.abrupt("return",(this.showVideoUploadError(),void(this.fileUploader.queue=[])));case 10:this.file2=this.fileUploader.queue[0].file,this.file=this.fileUploader.queue[1].file,this.openConfirmVideoUploadDialog();case 11:e.next=14;break;case 13:"cover"===this.uploadItem?(t=this.fileUploader.queue[this.fileUploader.queue.length-1].file).size>3e5?(this.showCoverUploadError(),this.fileUploader.queue=[]):(this.file=t,this.openConfirmCoverUploadDialog()):(this.file=this.fileUploader.queue[this.fileUploader.queue.length-1].file,this.openConfirmPdfUploadDialog());case 14:case"end":return e.stop()}},e,this)}))}},{key:"showVideoUploadError",value:function(){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({duration:3e3,message:"W\xe4hle ein Video und das Frontbild dazu aus...",color:"danger"});case 2:e.sent.present();case 3:case"end":return e.stop()}},e,this)}))}},{key:"showCoverUploadError",value:function(){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({duration:3e3,message:"W\xe4hle ein Cover mit maximal 300kb aus",color:"danger"});case 2:e.sent.present();case 3:case"end":return e.stop()}},e,this)}))}},{key:"openConfirmPdfUploadDialog",value:function(){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"PDF-Upload",message:"M\xf6chtest du die PDF-Datei (".concat(this.file.name,") f\xfcr diese Ausgabe hochladen?"),buttons:[{text:"Ja",handler:function(){return(0,d.mG)(t,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create();case 2:(t=e.sent).present(),this.firebaseService.uploadPdf(this.file).then(function(e){return(0,d.mG)(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:this.firebaseService.updateAusgabe(this.ausgabe.id.toString(),{pdfUrl:e.url,pdfPath:e.path}).then(function(){return(0,d.mG)(r,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.ausgabe.pdfUrl=e.url,t.dismiss(),this.fileUploader.queue=[],n.next=5,this.toastController.create({duration:3e3,color:"success",message:"Pdf erfolgreich hochgeladen!"});case 5:n.sent.present();case 6:case"end":return n.stop()}},n,this)}))}).catch(function(){return(0,d.mG)(r,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.dismiss(),this.fileUploader.queue=[],e.next=4,this.toastController.create({duration:3e3,color:"danger",message:"Die Pdf konnte nicht hochgeladen werden!"});case 4:e.sent.present();case 5:case"end":return e.stop()}},e,this)}))});case 1:case"end":return n.stop()}},n,this)}))}).catch(function(){t.dismiss(),n.fileUploader.queue=[]});case 4:case"end":return e.stop()}},e,this)}))}},{text:"Abbrechen"}]});case 2:return e.next=4,e.sent.present();case 4:case"end":return e.stop()}},e,this)}))}},{key:"openConfirmCoverUploadDialog",value:function(){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Cover-Upload",message:"M\xf6chtest du die Cover-Datei (".concat(this.file.name,") f\xfcr diese Ausgabe hochladen?"),buttons:[{text:"Ja",handler:function(){return(0,d.mG)(t,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create();case 2:(t=e.sent).present(),this.firebaseService.uploadPdf(this.file).then(function(e){return(0,d.mG)(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:this.firebaseService.updateAusgabe(this.ausgabe.id.toString(),{imageUrl:e.url,imagePath:e.path}).then(function(){return(0,d.mG)(r,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.ausgabe.imageUrl=e.url,this.ausgabe.imagePath=e.path,t.dismiss(),this.fileUploader.queue=[],n.next=6,this.toastController.create({duration:3e3,color:"success",message:"Das Cover wurde erfolgreich hochgeladen!"});case 6:n.sent.present();case 7:case"end":return n.stop()}},n,this)}))}).catch(function(){return(0,d.mG)(r,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.dismiss(),this.fileUploader.queue=[],e.next=4,this.toastController.create({duration:3e3,color:"danger",message:"Das Cover konnte nicht hochgeladen werden!"});case 4:e.sent.present();case 5:case"end":return e.stop()}},e,this)}))});case 1:case"end":return n.stop()}},n,this)}))}).catch(function(){t.dismiss(),n.fileUploader.queue=[]});case 4:case"end":return e.stop()}},e,this)}))}},{text:"Abbrechen"}]});case 2:return e.next=4,e.sent.present();case 4:case"end":return e.stop()}},e,this)}))}},{key:"openConfirmVideoUploadDialog",value:function(){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Video-Upload",inputs:[{name:"name",type:"text",placeholder:"Videoname"}],message:"M\xf6chtest du das Video (".concat(this.file.name,") inklusive dem Foto (").concat(this.file2.name,") f\xfcr diese Ausgabe hochladen?"),buttons:[{text:"Ja",handler:function(e){return(0,d.mG)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingController.create();case 2:(n=t.sent).present(),this.firebaseService.uploadVideoFile(this.file).then(function(t){return(0,d.mG)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var i=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:this.firebaseService.uploadVideoFile(this.file2).then(function(r){return(0,d.mG)(i,void 0,void 0,regeneratorRuntime.mark(function i(){var o=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:this.ausgabe.videos||(this.ausgabe.videos=[]),this.ausgabe.videos.push({image:r.url,imagePath:r.path,url:t.url,videoPath:t.path,name:e.name}),this.firebaseService.updateAusgabe(this.ausgabe.id.toString(),{videos:this.ausgabe.videos}).then(function(){return(0,d.mG)(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.dismiss(),this.fileUploader.queue=[],e.next=4,this.toastController.create({duration:3e3,color:"success",message:"Video erfolgreich hochgeladen!"});case 4:e.sent.present();case 5:case"end":return e.stop()}},e,this)}))}).catch(function(){return(0,d.mG)(o,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.dismiss(),this.fileUploader.queue=[],e.next=4,this.toastController.create({duration:3e3,color:"danger",message:"Das Video konnte nicht hochgeladen werden!"});case 4:e.sent.present();case 5:case"end":return e.stop()}},e,this)}))});case 1:case"end":return i.stop()}},i,this)}))}).catch(function(){n.dismiss(),i.fileUploader.queue=[]});case 1:case"end":return r.stop()}},r,this)}))}).catch(function(){n.dismiss(),r.fileUploader.queue=[]});case 4:case"end":return t.stop()}},t,this)}))}},{text:"Abbrechen"}]});case 2:return e.next=4,e.sent.present();case 4:case"end":return e.stop()}},e,this)}))}},{key:"saveVorwort",value:function(){var e=this;this.firebaseService.updateAusgabe(this.ausgabe.id.toString(),{title:this.ausgabe.title,content:this.ausgabe.content}).then(function(){return(0,d.mG)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.editMode=!1,e.next=3,this.toastController.create({duration:3e3,color:"success",message:"Das Vorwort wurde erfolgreich aktualisiert!"});case 3:e.sent.present();case 4:case"end":return e.stop()}},e,this)}))}).catch(function(){return(0,d.mG)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.editMode=!1,e.next=3,this.toastController.create({duration:3e3,color:"danger",message:"Das Vorwort konnte nicht aktualisiert werden!"});case 3:e.sent.present();case 4:case"end":return e.stop()}},e,this)}))})}},{key:"share",value:function(){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.m.share({title:"Ausgabe teilen",text:"Ausgabe ".concat(this.ausgabe.name),url:"https://jugendkompass.com/tabs/ausgabe/".concat(this.ausgabe.id),dialogTitle:"Impuls teilen"});case 2:case"end":return e.stop()}},e,this)}))}},{key:"openPost",value:function(e){this.router.navigateByUrl("/tabs/lesen/".concat(e.id))}},{key:"toggleShowMore",value:function(){this.showMore=!this.showMore}}])&&t(r.prototype,i),o&&t(r,o),n}();return n.\u0275fac=function(e){return new(e||n)(T.Y36(c.t4),T.Y36(P.Ke),T.Y36(l.gz),T.Y36(f.O),T.Y36(x.u),T.Y36(c.HT),T.Y36(c.BX),T.Y36(c.Br),T.Y36(c.yF),T.Y36(q.Q),T.Y36(S.c),T.Y36(l.F0))},n.\u0275cmp=T.Xpm({type:n,selectors:[["app-ausgabe"]],decls:24,vars:15,consts:[["fullscreen","true","scrollEvents","true"],["slot","start"],["text","","defaultHref","/tabs/lesen"],["slot","end",4,"ngIf"],[1,"coverCard"],[3,"src"],[1,"mainContent"],["class","text",4,"ngIf"],["lines","none",4,"ngIf"],["class","text shortText",3,"innerHTML","font-size",4,"ngIf"],["class","text",3,"innerHTML","font-size",4,"ngIf"],["shape","round","color","primary","size","small",3,"click",4,"ngIf"],["shape","round","size","small",3,"click",4,"ngIf"],[1,"text"],[3,"options"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["slot","end"],["type","file","ng2FileSelect","",2,"display","none",3,"uploader","change"],["selector",""],[3,"click",4,"ngIf"],[3,"click"],["slot","icon-only","name","cloud-upload"],["slot","icon-only","src","../../../assets/icons/pdf.svg"],["slot","icon-only","name","share-outline"],["slot","icon-only","name","save-outline"],["lines","none"],["position","stacked"],["placeholder","Title eingeben...",3,"ngModel","ngModelChange"],[1,"text","shortText",3,"innerHTML"],[1,"text",3,"innerHTML"],["shape","round","color","primary","size","small",3,"click"],["shape","round","size","small",3,"click"],["cols","10","autoGrow","true","placeholder","Vorwort in HTML Format eingeben...",3,"ngModel","ngModelChange",4,"ngIf"],["cols","10","autoGrow","true","placeholder","Vorwort in HTML Format eingeben...",3,"ngModel","ngModelChange"],["id","fullscreen","slot","fixed"],["color","medium"],["size","medium","name","play"]],template:function(e,t){1&e&&(T.TgZ(0,"ion-content",0),T.TgZ(1,"ion-toolbar"),T.TgZ(2,"ion-buttons",1),T._UZ(3,"ion-back-button",2),T.qZA(),T.YNc(4,F,6,4,"ion-buttons",3),T.YNc(5,V,3,0,"ion-buttons",3),T.qZA(),T.TgZ(6,"ion-card",4),T._UZ(7,"img",5),T.TgZ(8,"h3"),T._uU(9),T.qZA(),T.qZA(),T.TgZ(10,"div",6),T.YNc(11,D,2,1,"h2",7),T.YNc(12,N,4,1,"ion-item",8),T.YNc(13,O,1,3,"div",9),T.YNc(14,E,1,3,"div",10),T.YNc(15,G,2,0,"ion-button",11),T.YNc(16,Y,2,0,"ion-button",12),T.YNc(17,H,4,1,"ion-item",8),T.TgZ(18,"h2",13),T._uU(19,"Artikel"),T.qZA(),T.TgZ(20,"ion-slides",14),T.YNc(21,z,5,2,"ion-slide",15),T.qZA(),T.YNc(22,L,2,0,"h2",7),T.YNc(23,j,2,1,"ion-slides",16),T.qZA(),T.qZA()),2&e&&(T.xp6(4),T.Q6J("ngIf",!t.editMode),T.xp6(1),T.Q6J("ngIf",t.editMode),T.xp6(2),T.Q6J("src",null==t.ausgabe?null:t.ausgabe.imageUrl,T.LSH),T.xp6(2),T.hij("Ausgabe ",null==t.ausgabe?null:t.ausgabe.name,""),T.xp6(2),T.Q6J("ngIf",!t.editMode),T.xp6(1),T.Q6J("ngIf",t.editMode),T.xp6(1),T.Q6J("ngIf",!t.editMode&&!t.showMore),T.xp6(1),T.Q6J("ngIf",!t.editMode&&t.showMore),T.xp6(1),T.Q6J("ngIf",!t.editMode&&!t.showMore),T.xp6(1),T.Q6J("ngIf",!t.editMode&&t.showMore),T.xp6(1),T.Q6J("ngIf",t.editMode),T.xp6(3),T.Q6J("options",t.slideOpts),T.xp6(1),T.Q6J("ngForOf",t.posts),T.xp6(1),T.Q6J("ngIf",(null==t.ausgabe?null:t.ausgabe.videos)&&t.ausgabe.videos.length),T.xp6(1),T.Q6J("ngIf",(null==t.ausgabe?null:t.ausgabe.videos)&&t.ausgabe.videos.length))},directives:[c.W2,c.sr,c.Sm,c.oU,c.cs,s.O5,c.PM,c.Hr,s.sg,M.C6,c.YG,c.gu,c.Ie,c.Q$,c.pK,c.j9,u.JJ,u.On,c.g2,c.A$,c.W4],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: transparent;--border-color: transparent;padding:1rem}.coverCard[_ngcontent-%COMP%]{margin:1rem auto auto;max-width:10rem}ion-slides[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin-top:0}ion-fab-button[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);opacity:.8;pointer-events:none}ion-card[_ngcontent-%COMP%]{box-shadow:none}.mainContent[_ngcontent-%COMP%]{padding:1rem 1.5rem}ion-content[_ngcontent-%COMP%]{--padding-bottom: 2.5rem}img[_ngcontent-%COMP%]{border:2px solid var(--ion-color-light);border-radius:1rem}.shortText[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:5;line-clamp:5;-webkit-box-orient:vertical}"]}),n}()}],$=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=T.oAB({type:t}),t.\u0275inj=T.cJS({imports:[[l.Bz.forChild(W)],l.Bz]}),t}(),X=o(88665),K=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=T.oAB({type:t}),t.\u0275inj=T.cJS({imports:[[s.ez,u.u5,c.Pc,X.U,$,M.Ob]]}),t}()}}])}();