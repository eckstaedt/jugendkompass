"use strict";(self.webpackChunkjugendkompass=self.webpackChunkjugendkompass||[]).push([[2192],{52192:function(e,t,n){n.r(t),n.d(t,{KeysPageModule:function(){return y}});var i=n(38583),o=n(90665),s=n(94490),r=n(9451),u=n(64762),a=n(8078),c=n(33018),l=n(49860);function h(e,t){if(1&e&&(c.TgZ(0,"h2"),c._uU(1),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.hij(" Benutzt: 0 | Verf\xfcgbar: ",e.remainingKeyCount," ")}}function p(e,t){if(1&e&&(c.TgZ(0,"h2"),c._uU(1),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.AsE(" Benutzt: ",e.usedKeys," | Verf\xfcgbar: ",e.remainingKeyCount," ")}}function d(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"ion-item",4),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw().openUpdateSheet(t)}),c.TgZ(1,"ion-label"),c.TgZ(2,"h2"),c._uU(3),c.qZA(),c.YNc(4,h,2,1,"h2",6),c.YNc(5,p,2,2,"h2",6),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit;c.xp6(3),c.Oqu(e.value),c.xp6(1),c.Q6J("ngIf",!e.usedKeys),c.xp6(1),c.Q6J("ngIf",e.usedKeys)}}const g=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.firebaseService=e,this.alertController=t,this.actionSheetController=n,this.utils=i}ngOnInit(){this.keys$=this.firebaseService.getKeys()}openCreateAlert(){return(0,u.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({message:"Key hinzuf\xfcgen",inputs:[{placeholder:"Key",name:"key",type:"text"},{placeholder:"Anzahl",name:"count",type:"number",min:1,max:9999}],buttons:[{text:"Abbrechen"},{text:"Hinzuf\xfcgen",handler:e=>{this.firebaseService.addKey({value:e.key,usedKeys:0,remainingKeyCount:parseInt(e.count,10)}).then(()=>{this.utils.showToast("Key erfolgreich hinzugef\xfcgt","success")}).catch(()=>{this.utils.showToast("Fehler beim hinzuf\xfcgen, probiere es erneut")})}}]})).present()})}openUpdateSheet(e){return(0,u.mG)(this,void 0,void 0,function*(){yield(yield this.actionSheetController.create({header:"W\xe4hle eine Anzahl",buttons:[{text:"5",handler:()=>{this.updateKey(e.value,e.remainingKeyCount+5)}},{text:"10",handler:()=>{this.updateKey(e.value,e.remainingKeyCount+10)}},{text:"35",handler:()=>{this.updateKey(e.value,e.remainingKeyCount+35)}},{text:"Andere...",handler:()=>{this.openInputAlert(e)}},{text:"Abbrechen"}]})).present()})}openInputAlert(e){return(0,u.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({message:"Gib eine Anzahl an",inputs:[{placeholder:"Anzahl",name:"count",type:"number",min:1,max:9999}],buttons:[{text:"Abbrechen"},{text:"Hinzuf\xfcgen",handler:t=>{this.updateKey(e.value,e.remainingKeyCount+parseInt(t.count))}}]})).present()})}updateKey(e,t){this.firebaseService.updateKey({count:t,value:e}).then(()=>{this.utils.showToast("Key erfolgreich geupdated","success")}).catch(()=>{this.utils.showToast("Fehler beim updaten, probiere es erneut")})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(a.O),c.Y36(s.Br),c.Y36(s.BX),c.Y36(l.c))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-keys"]],decls:13,vars:3,consts:[["slot","start"],["text","","defaultHref","/tabs/settings"],[3,"click",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"],[4,"ngIf"]],template:function(e,t){1&e&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c._UZ(3,"ion-back-button",1),c.qZA(),c.TgZ(4,"ion-title"),c._uU(5,"Keyverwaltung"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"ion-content"),c.TgZ(7,"ion-list"),c.YNc(8,d,6,3,"ion-item",2),c.ALo(9,"async"),c.qZA(),c.TgZ(10,"ion-fab",3),c.TgZ(11,"ion-fab-button",4),c.NdJ("click",function(){return t.openCreateAlert()}),c._UZ(12,"ion-icon",5),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(8),c.Q6J("ngForOf",c.lcZ(9,1,t.keys$)))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.W2,s.q_,i.sg,s.IJ,s.W4,s.gu,s.Ie,s.Q$,i.O5],pipes:[i.Ov],styles:[""]}),e})()}];let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[r.Bz.forChild(g)],r.Bz]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[i.ez,o.u5,s.Pc,f]]}),e})()}}]);