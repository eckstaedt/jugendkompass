(self.webpackChunkjugendkompass=self.webpackChunkjugendkompass||[]).push([[9460],{48873:function(t){t.exports=function(){"use strict";var t="millisecond",n="second",e="minute",i="hour",r="day",o="week",a="month",s="quarter",u="year",c="date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},l=function(t,n,e){var i=String(t);return!i||i.length>=n?t:""+Array(n+1-i.length).join(e)+t},g={s:l,z:function(t){var n=-t.utcOffset(),e=Math.abs(n),i=Math.floor(e/60),r=e%60;return(n<=0?"+":"-")+l(i,2,"0")+":"+l(r,2,"0")},m:function t(n,e){if(n.date()<e.date())return-t(e,n);var i=12*(e.year()-n.year())+(e.month()-n.month()),r=n.clone().add(i,a),o=e-r<0,s=n.clone().add(i+(o?-1:1),a);return+(-(i+(e-r)/(o?r-s:s-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(d){return{M:a,y:u,w:o,d:r,D:c,h:i,m:e,s:n,ms:t,Q:s}[d]||String(d||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},A="en",Z={};Z[A]=f;var p=function(t){return t instanceof T},C=function(t,n,e){var i;if(!t)return A;if("string"==typeof t)Z[t]&&(i=t),n&&(Z[t]=n,i=t);else{var r=t.name;Z[r]=t,i=r}return!e&&i&&(A=i),i||!e&&A},$=function(t,n){if(p(t))return t.clone();var e="object"==typeof n?n:{};return e.date=t,e.args=arguments,new T(e)},_=g;_.l=C,_.i=p,_.w=function(t,n){return $(t,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var T=function(){function f(t){this.$L=C(t.locale,null,!0),this.parse(t)}var l=f.prototype;return l.parse=function(t){this.$d=function(t){var n=t.date,e=t.utc;if(null===n)return new Date(NaN);if(_.u(n))return new Date;if(n instanceof Date)return new Date(n);if("string"==typeof n&&!/Z$/i.test(n)){var i=n.match(d);if(i){var r=i[2]-1||0,o=(i[7]||"0").substring(0,3);return e?new Date(Date.UTC(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)):new Date(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)}}return new Date(n)}(t),this.$x=t.x||{},this.init()},l.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},l.$utils=function(){return _},l.isValid=function(){return"Invalid Date"!==this.$d.toString()},l.isSame=function(t,n){var e=$(t);return this.startOf(n)<=e&&e<=this.endOf(n)},l.isAfter=function(t,n){return $(t)<this.startOf(n)},l.isBefore=function(t,n){return this.endOf(n)<$(t)},l.$g=function(t,n,e){return _.u(t)?this[n]:this.set(e,t)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(t,s){var d=this,h=!!_.u(s)||s,f=_.p(t),l=function(t,n){var e=_.w(d.$u?Date.UTC(d.$y,n,t):new Date(d.$y,n,t),d);return h?e:e.endOf(r)},g=function(t,n){return _.w(d.toDate()[t].apply(d.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(n)),d)},A=this.$W,Z=this.$M,p=this.$D,C="set"+(this.$u?"UTC":"");switch(f){case u:return h?l(1,0):l(31,11);case a:return h?l(1,Z):l(0,Z+1);case o:var $=this.$locale().weekStart||0,T=(A<$?A+7:A)-$;return l(h?p-T:p+(6-T),Z);case r:case c:return g(C+"Hours",0);case i:return g(C+"Minutes",1);case e:return g(C+"Seconds",2);case n:return g(C+"Milliseconds",3);default:return this.clone()}},l.endOf=function(t){return this.startOf(t,!1)},l.$set=function(o,s){var d,h=_.p(o),f="set"+(this.$u?"UTC":""),l=(d={},d[r]=f+"Date",d[c]=f+"Date",d[a]=f+"Month",d[u]=f+"FullYear",d[i]=f+"Hours",d[e]=f+"Minutes",d[n]=f+"Seconds",d[t]=f+"Milliseconds",d)[h],g=h===r?this.$D+(s-this.$W):s;if(h===a||h===u){var A=this.clone().set(c,1);A.$d[l](g),A.init(),this.$d=A.set(c,Math.min(this.$D,A.daysInMonth())).$d}else l&&this.$d[l](g);return this.init(),this},l.set=function(t,n){return this.clone().$set(t,n)},l.get=function(t){return this[_.p(t)]()},l.add=function(t,s){var c,d=this;t=Number(t);var h=_.p(s),f=function(n){var e=$(d);return _.w(e.date(e.date()+Math.round(n*t)),d)};if(h===a)return this.set(a,this.$M+t);if(h===u)return this.set(u,this.$y+t);if(h===r)return f(1);if(h===o)return f(7);var l=(c={},c[e]=6e4,c[i]=36e5,c[n]=1e3,c)[h]||1,g=this.$d.getTime()+t*l;return _.w(g,this)},l.subtract=function(t,n){return this.add(-1*t,n)},l.format=function(t){var n=this;if(!this.isValid())return"Invalid Date";var e=t||"YYYY-MM-DDTHH:mm:ssZ",i=_.z(this),r=this.$locale(),o=this.$H,a=this.$m,s=this.$M,u=r.weekdays,c=r.months,d=function(t,i,r,o){return t&&(t[i]||t(n,e))||r[i].substr(0,o)},f=function(t){return _.s(o%12||12,t,"0")},l=r.meridiem||function(t,n,e){var i=t<12?"AM":"PM";return e?i.toLowerCase():i},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:_.s(s+1,2,"0"),MMM:d(r.monthsShort,s,c,3),MMMM:d(c,s),D:this.$D,DD:_.s(this.$D,2,"0"),d:String(this.$W),dd:d(r.weekdaysMin,this.$W,u,2),ddd:d(r.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:_.s(o,2,"0"),h:f(1),hh:f(2),a:l(o,a,!0),A:l(o,a,!1),m:String(a),mm:_.s(a,2,"0"),s:String(this.$s),ss:_.s(this.$s,2,"0"),SSS:_.s(this.$ms,3,"0"),Z:i};return e.replace(h,function(t,n){return n||g[t]||i.replace(":","")})},l.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},l.diff=function(t,c,d){var h,f=_.p(c),l=$(t),g=6e4*(l.utcOffset()-this.utcOffset()),A=this-l,Z=_.m(this,l);return Z=(h={},h[u]=Z/12,h[a]=Z,h[s]=Z/3,h[o]=(A-g)/6048e5,h[r]=(A-g)/864e5,h[i]=A/36e5,h[e]=A/6e4,h[n]=A/1e3,h)[f]||A,d?Z:_.a(Z)},l.daysInMonth=function(){return this.endOf(a).$D},l.$locale=function(){return Z[this.$L]},l.locale=function(t,n){if(!t)return this.$L;var e=this.clone(),i=C(t,n,!0);return i&&(e.$L=i),e},l.clone=function(){return _.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},f}(),O=T.prototype;return $.prototype=O,[["$ms",t],["$s",n],["$m",e],["$H",i],["$W",r],["$M",a],["$y",u],["$D",c]].forEach(function(t){O[t[1]]=function(n){return this.$g(n,t[0],t[1])}}),$.extend=function(t,n){return t.$i||(t(n,T,$),t.$i=!0),$},$.locale=C,$.isDayjs=p,$.unix=function(t){return $(1e3*t)},$.en=Z[A],$.Ls=Z,$.p={},$}()},49460:function(t,n,e){"use strict";e.r(n),e.d(n,{AnalyticsPageModule:function(){return T}});var i=e(38583),r=e(90665),o=e(94490),a=e(9451),s=e(48873),u=e(6823),c=e(8078),d=e(69526),h=e(33018),f=e(49860);const l=["sessionsChart"],g=["updatesChart"],A=["platformChart"],Z=["pushFromAppChart"],p=["pushFromOutsideChart"],C=[{path:"",component:(()=>{class t{constructor(t,n){this.firebaseService=t,this.utils=n,this.sessionsCount=0,this.updatesCount=0,this.pushFromAppCount=0,this.pushFromOutsideCount=0,this.installationsCount=0,this.adminCount=0,this.categoryChangedCount=0,this.videoPlayedCount=0,this.pdfDownloadedCount=0,this.ausgabeOpenedCount=0,this.filterAppliedCount=0,this.favoriteAddedCount=0,this.favoriteRemovedCount=0,this.postReadAverage=""}ngOnInit(){}ngAfterViewInit(){this.firebaseService.getAnalyticsOverview().subscribe(t=>{if(this.data=t,t[`${d.fg.APP_SESSIONS}Count`]&&(this.sessionsCount=t[`${d.fg.APP_SESSIONS}Count`],t[`${d.fg.APP_SESSIONS}Count`]>1&&this.prepareBarChart(this.sessionsChart.nativeElement,t[`${d.fg.APP_SESSIONS}Data`])),t[`${d.fg.APP_UPDATED}Count`]&&(this.updatesCount=t[`${d.fg.APP_UPDATED}Count`],t[`${d.fg.APP_UPDATED}Count`]>1&&this.prepareBarChart(this.updatesChart.nativeElement,t[`${d.fg.APP_UPDATED}Data`])),t[`${d.fg.PUSH_OPENED_FROM_APP}Count`]&&(this.pushFromAppCount=t[`${d.fg.PUSH_OPENED_FROM_APP}Count`],t[`${d.fg.PUSH_OPENED_FROM_APP}Count`]>1&&this.prepareBarChart(this.pushFromAppChart.nativeElement,t[`${d.fg.PUSH_OPENED_FROM_APP}Data`])),t[`${d.fg.PUSH_OPENED_FROM_OUTSIDE}Count`]&&(this.pushFromOutsideCount=t[`${d.fg.PUSH_OPENED_FROM_OUTSIDE}Count`],t[`${d.fg.PUSH_OPENED_FROM_OUTSIDE}Count`]>1&&this.prepareBarChart(this.pushFromOutsideChart.nativeElement,t[`${d.fg.PUSH_OPENED_FROM_OUTSIDE}Data`])),t[`${d.fg.APP_INSTALLATIONS}Count`]&&(this.installationsCount=t[`${d.fg.APP_INSTALLATIONS}Count`],t[`${d.fg.APP_INSTALLATIONS}Count`]>1&&this.prepareInstallationsChart(t[`${d.fg.APP_INSTALLATIONS}Data`])),t[`${d.fg.ADMIN_LOGGED_IN}Count`]&&(this.adminCount=t[`${d.fg.ADMIN_LOGGED_IN}Count`]),t[`${d.fg.POST_TIME}Count`]){let n=0;for(const i of t[`${d.fg.POST_TIME}Data`])n+=i.duration;const e=Math.round(n/t[`${d.fg.POST_TIME}Data`].length);this.postReadAverage=this.utils.getMinString(e)}t[`${d.fg.CATEGORY_CHANGED}Count`]&&(this.categoryChangedCount=t[`${d.fg.CATEGORY_CHANGED}Count`]),t[`${d.fg.VIDEO_PLAYED}Count`]&&(this.videoPlayedCount=t[`${d.fg.VIDEO_PLAYED}Count`]),t[`${d.fg.PDF_DOWNLOADED}Count`]&&(this.pdfDownloadedCount=t[`${d.fg.PDF_DOWNLOADED}Count`]),t[`${d.fg.AUSGABE_OPENED}Count`]&&(this.ausgabeOpenedCount=t[`${d.fg.AUSGABE_OPENED}Count`]),t[`${d.fg.FILTER_MODAL_APPLIED}Count`]&&(this.filterAppliedCount=t[`${d.fg.FILTER_MODAL_APPLIED}Count`]),t[`${d.fg.FAVORITE_ADDED}Count`]&&(this.favoriteAddedCount=t[`${d.fg.FAVORITE_ADDED}Count`]),t[`${d.fg.FAVORITE_REMOVED}Count`]&&(this.favoriteRemovedCount=t[`${d.fg.FAVORITE_REMOVED}Count`])})}prepareBarChart(t,n){let e=[];for(const i of n){const t=s(i.timestamp.toDate()),n=e.findIndex(n=>t.isSame(n.date,"day"));n>-1?e[n]=Object.assign(Object.assign({},e[n]),{count:e[n].count+1}):e.push({name:t.format("DD.MM.YYYY"),date:t,count:1})}e=e.slice(-30),new u.Chart(t,{type:"bar",data:{labels:e.map(t=>t.name),datasets:[{label:"Sessions",data:e.map(t=>t.count)}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}prepareInstallationsChart(t){const n={[d.YK.IPHONE]:0,[d.YK.IPAD]:0,[d.YK.ANDROID_PHONE]:0,[d.YK.ANDROID_TABLET]:0,[d.YK.WEB]:0,[d.YK.OTHER]:0};for(const e of t)n[e.platform]+=1;new u.Chart(this.platformChart.nativeElement,{type:"pie",data:{labels:Object.keys(n),datasets:[{data:Object.keys(n).map(t=>n[t]),backgroundColor:["#d5303f","#3dc2ff","#5260ff","#2dd36f","#ffc409","#222428","#92949c"]}]}})}onChartClick(t){console.log(t)}}return t.\u0275fac=function(n){return new(n||t)(h.Y36(c.O),h.Y36(f.c))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-analytics"]],viewQuery:function(t,n){if(1&t&&(h.Gf(l,5),h.Gf(g,5),h.Gf(A,5),h.Gf(Z,5),h.Gf(p,5)),2&t){let t;h.iGM(t=h.CRH())&&(n.sessionsChart=t.first),h.iGM(t=h.CRH())&&(n.updatesChart=t.first),h.iGM(t=h.CRH())&&(n.platformChart=t.first),h.iGM(t=h.CRH())&&(n.pushFromAppChart=t.first),h.iGM(t=h.CRH())&&(n.pushFromOutsideChart=t.first)}},decls:103,vars:13,consts:[["slot","start"],["text","","defaultHref","/tabs/settings"],["size","12","size-md","6","size-xl","4"],["sessionsChart",""],["updatesChart",""],["pushFromAppChart",""],["pushFromOutsideChart",""],["platformChart",""],["color","success"],["color","success",1,"multiline"],["color","danger",1,"multiline"]],template:function(t,n){1&t&&(h.TgZ(0,"ion-header"),h.TgZ(1,"ion-toolbar"),h.TgZ(2,"ion-buttons",0),h._UZ(3,"ion-back-button",1),h.qZA(),h.TgZ(4,"ion-title"),h._uU(5,"Analysenauswertung"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(6,"ion-content"),h.TgZ(7,"ion-grid"),h.TgZ(8,"ion-row"),h.TgZ(9,"ion-col",2),h.TgZ(10,"ion-card"),h.TgZ(11,"ion-card-header"),h.TgZ(12,"ion-card-title"),h._uU(13),h.qZA(),h.qZA(),h._UZ(14,"canvas",null,3),h.qZA(),h.qZA(),h.TgZ(16,"ion-col",2),h.TgZ(17,"ion-card"),h.TgZ(18,"ion-card-header"),h.TgZ(19,"ion-card-title"),h._uU(20),h.qZA(),h.qZA(),h._UZ(21,"canvas",null,4),h.qZA(),h.qZA(),h.TgZ(23,"ion-col",2),h.TgZ(24,"ion-card"),h.TgZ(25,"ion-card-header"),h.TgZ(26,"ion-card-title"),h._uU(27),h.qZA(),h.qZA(),h._UZ(28,"canvas",null,5),h.qZA(),h.qZA(),h.TgZ(30,"ion-col",2),h.TgZ(31,"ion-card"),h.TgZ(32,"ion-card-header"),h.TgZ(33,"ion-card-title"),h._uU(34),h.qZA(),h.qZA(),h._UZ(35,"canvas",null,6),h.qZA(),h.qZA(),h.TgZ(37,"ion-col",2),h.TgZ(38,"ion-card"),h.TgZ(39,"ion-card-header"),h.TgZ(40,"ion-card-title"),h._uU(41),h.qZA(),h.qZA(),h._UZ(42,"canvas",null,7),h.qZA(),h.qZA(),h.TgZ(44,"ion-col",2),h.TgZ(45,"ion-card"),h.TgZ(46,"ion-card-header"),h.TgZ(47,"ion-card-title"),h._uU(48,"Lesedauer (Minuten) \xd8"),h.qZA(),h.qZA(),h.TgZ(49,"ion-card-content"),h.TgZ(50,"ion-label",8),h._uU(51),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(52,"ion-col",2),h.TgZ(53,"ion-card"),h.TgZ(54,"ion-card-header"),h.TgZ(55,"ion-card-title"),h._uU(56,"Kategorie-Filter geklickt"),h.qZA(),h.qZA(),h.TgZ(57,"ion-card-content"),h.TgZ(58,"ion-label",8),h._uU(59),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(60,"ion-col",2),h.TgZ(61,"ion-card"),h.TgZ(62,"ion-card-header"),h.TgZ(63,"ion-card-title"),h._uU(64,"Favoriten"),h.qZA(),h.qZA(),h.TgZ(65,"ion-card-content"),h.TgZ(66,"ion-label",9),h._uU(67),h.qZA(),h._UZ(68,"br"),h.TgZ(69,"ion-label",10),h._uU(70),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(71,"ion-col",2),h.TgZ(72,"ion-card"),h.TgZ(73,"ion-card-header"),h.TgZ(74,"ion-card-title"),h._uU(75,"Ausgaben ge\xf6ffnet"),h.qZA(),h.qZA(),h.TgZ(76,"ion-card-content"),h.TgZ(77,"ion-label",8),h._uU(78),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(79,"ion-col",2),h.TgZ(80,"ion-card"),h.TgZ(81,"ion-card-header"),h.TgZ(82,"ion-card-title"),h._uU(83,"PDF Downlaods"),h.qZA(),h.qZA(),h.TgZ(84,"ion-card-content"),h.TgZ(85,"ion-label",8),h._uU(86),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(87,"ion-col",2),h.TgZ(88,"ion-card"),h.TgZ(89,"ion-card-header"),h.TgZ(90,"ion-card-title"),h._uU(91,"Videos abgespielt"),h.qZA(),h.qZA(),h.TgZ(92,"ion-card-content"),h.TgZ(93,"ion-label",8),h._uU(94),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(95,"ion-col",2),h.TgZ(96,"ion-card"),h.TgZ(97,"ion-card-header"),h.TgZ(98,"ion-card-title"),h._uU(99,"Filter hinzugef\xfcgt"),h.qZA(),h.qZA(),h.TgZ(100,"ion-card-content"),h.TgZ(101,"ion-label",8),h._uU(102),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(13),h.hij("App Aufrufe (",n.sessionsCount,")"),h.xp6(7),h.hij("App Updates (",n.updatesCount,")"),h.xp6(7),h.hij("Push in der App empfangen (",n.pushFromAppCount,")"),h.xp6(7),h.hij("Push von au\xdfen empfangen (",n.pushFromOutsideCount,")"),h.xp6(7),h.hij("App-Installationen (",n.installationsCount,")"),h.xp6(10),h.Oqu(n.postReadAverage),h.xp6(8),h.Oqu(n.categoryChangedCount),h.xp6(8),h.hij("Hinzugef\xfcgt: ",n.favoriteAddedCount,""),h.xp6(3),h.hij("Entfernt: ",n.favoriteRemovedCount,""),h.xp6(8),h.Oqu(n.ausgabeOpenedCount),h.xp6(8),h.Oqu(n.pdfDownloadedCount),h.xp6(8),h.Oqu(n.videoPlayedCount),h.xp6(8),h.Oqu(n.filterAppliedCount))},directives:[o.Gu,o.sr,o.Sm,o.oU,o.cs,o.wd,o.W2,o.jY,o.Nd,o.wI,o.PM,o.Zi,o.gZ,o.FN,o.Q$],styles:["ion-card[_ngcontent-%COMP%]{margin:0}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{text-align:center}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:6rem}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-label.multiline[_ngcontent-%COMP%]{font-size:2rem}"]}),t})()}];let $=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[a.Bz.forChild(C)],a.Bz]}),t})();var _=e(36345);let T=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[i.ez,r.u5,o.Pc,_.m9,$]]}),t})()}}]);